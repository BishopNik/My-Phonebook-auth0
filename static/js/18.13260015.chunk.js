"use strict";(self.webpackChunkreact_my_phonebook=self.webpackChunkreact_my_phonebook||[]).push([[18],{7018:function(e,a,n){n.r(a);var s=n(4165),r=n(5861),t=n(9439),o=n(2791),c=n(9434),l=n(3329),i=n(9273),u=n(6993),d=n(7689),p=n(6009),x=n(184);a.default=function(){var e=(0,o.useState)(null),a=(0,t.Z)(e,2),n=a[0],h=a[1],f=(0,o.useState)(null),m=(0,t.Z)(f,2),j=m[0],v=m[1],w=(0,c.I0)(),k=(0,d.s0)(),_=(0,p.a)().user;(0,o.useEffect)((function(){if(n){var e=URL.createObjectURL(n);return v(e),function(){return URL.revokeObjectURL(e)}}}),[n]);var b=function(e,a,n){return a!==n?((0,u._N)("Passwords do not match. Please change your password."),e):a},y=function(){var e=(0,r.Z)((0,s.Z)().mark((function e(a){var r,t,o,c,l,d;return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a.preventDefault(),e.prev=1,r=a.target.name.value,t=a.target.oldpassword.value,o=a.target.password.value,c=a.target.confirmpassword.value,l=b(t,o,c),!r){e.next=10;break}return e.next=10,w((0,i.eu)({name:r}));case 10:if(l===t){e.next=13;break}return e.next=13,w((0,i.Cp)({oldPassword:t,newPassword:l}));case 13:if(!n){e.next=18;break}return(d=new FormData).append("avatar",n,n.name),e.next=18,w((0,i.mk)(d));case 18:l!==t&&null!==t&&k("/phonebook"),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(1),(0,u._N)("Error change settings",e.t0);case 24:case"end":return e.stop()}}),e,null,[[1,21]])})));return function(a){return e.apply(this,arguments)}}();return(0,x.jsx)(l.W2,{children:(0,x.jsx)(l.l0,{onSubmit:y,children:(0,x.jsxs)(l.fk,{children:[(0,x.jsxs)(l.AG,{children:[(0,x.jsxs)(l.hs,{children:[(0,x.jsxs)(l.__,{children:["Old name",(0,x.jsx)(l.II,{type:"text",name:"oldname",value:_.name,disabled:!0})]}),(0,x.jsxs)(l.__,{children:["New name",(0,x.jsx)(l.II,{type:"text",name:"name"})]})]}),(0,x.jsxs)(l.hs,{children:[(0,x.jsxs)(l.__,{children:["Old password",(0,x.jsx)(l.II,{type:"password",name:"oldpassword"})]}),(0,x.jsxs)(l.__,{children:["New password",(0,x.jsx)(l.II,{type:"password",name:"password"})]}),(0,x.jsxs)(l.__,{children:["Confirm password",(0,x.jsx)(l.II,{type:"password",name:"confirmpassword"})]})]})]}),(0,x.jsxs)(l.AG,{children:[(0,x.jsx)(l.Ei,{src:j||_.avatarURL,alt:"user avatar"}),(0,x.jsx)(l.II,{type:"file",name:"avatar",onChange:function(e){var a=e.target;if(a.files){var n=a.files[0];n&&n instanceof File&&n.type.startsWith("image/")?h(n):((0,u._N)("Bad type file"),a.value="",v(_.avatarURL),h(null),a.click())}else(0,u._N)("Please select image")}}),(0,x.jsxs)(l.KN,{children:[(0,x.jsx)(l.zx,{type:"submit",children:"Change"}),(0,x.jsx)(l.zx,{type:"button",onClick:function(){return k("/phonebook")},children:"Cancel"})]})]})]})})})}}}]);
//# sourceMappingURL=18.13260015.chunk.js.map