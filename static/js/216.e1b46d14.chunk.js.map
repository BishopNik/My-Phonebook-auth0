{"version":3,"file":"static/js/216.e1b46d14.chunk.js","mappings":"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","sources":["pages/ChangeSettings.jsx","styled/shared.styled.jsx"],"sourcesContent":["/** @format */\n\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { Container } from 'styled/shared.styled';\nimport { changeAvatar, changeName, changePassword } from 'redux/auth/operations';\nimport { toastError } from 'components/Helpers';\nimport { useNavigate } from 'react-router-dom';\nimport {\n\tButton,\n\tButtonBox,\n\tForm,\n\tInput,\n\tFlexBoxMain,\n\tFlexBoxSection,\n\tFlexBox,\n\tImg,\n\tLabel,\n} from 'styled/shared.styled';\nimport { useAuth } from 'hooks';\n\nconst ChangeAvatar = () => {\n\tconst [avatar, setAvatar] = useState(null);\n\tconst [avatarURL, setAvatarURL] = useState(null);\n\tconst dispatch = useDispatch();\n\tconst navigate = useNavigate();\n\tconst { user } = useAuth();\n\n\tuseEffect(() => {\n\t\tif (avatar) {\n\t\t\tconst avatarObjectURL = URL.createObjectURL(avatar);\n\t\t\tsetAvatarURL(avatarObjectURL);\n\n\t\t\treturn () => URL.revokeObjectURL(avatarObjectURL);\n\t\t}\n\t}, [avatar]);\n\n\tconst newPassword = (oldPas, newPas, confPas) => {\n\t\tif (newPas !== confPas) {\n\t\t\ttoastError('Passwords do not match. Please change your password.');\n\t\t\treturn oldPas;\n\t\t}\n\t\treturn newPas;\n\t};\n\n\tconst handleSubmit = async e => {\n\t\te.preventDefault();\n\t\ttry {\n\t\t\tconst newName = e.target.name.value;\n\t\t\tconst oldPas = e.target.oldpassword.value;\n\t\t\tconst newPas = e.target.password.value;\n\t\t\tconst confPas = e.target.confirmpassword.value;\n\t\t\tconst resultPas = newPassword(oldPas, newPas, confPas);\n\n\t\t\tif (newName) {\n\t\t\t\tawait dispatch(changeName({ name: newName }));\n\t\t\t}\n\t\t\tif (resultPas !== oldPas) {\n\t\t\t\tawait dispatch(\n\t\t\t\t\tchangePassword({\n\t\t\t\t\t\toldPassword: oldPas,\n\t\t\t\t\t\tnewPassword: resultPas,\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t\tif (avatar) {\n\t\t\t\tconst formData = new FormData();\n\t\t\t\tformData.append('avatar', avatar, avatar.name);\n\t\t\t\tawait dispatch(changeAvatar(formData));\n\t\t\t}\n\t\t\tif (resultPas !== oldPas && oldPas !== null) navigate('/phonebook');\n\t\t} catch (error) {\n\t\t\ttoastError('Error change settings', error);\n\t\t}\n\t};\n\n\tconst handleFileChange = ({ target }) => {\n\t\tif (!target.files) {\n\t\t\ttoastError('Please select image');\n\t\t\treturn;\n\t\t}\n\t\tconst file = target.files[0];\n\t\tif (file && file instanceof File && file.type.startsWith('image/')) {\n\t\t\tsetAvatar(file);\n\t\t} else {\n\t\t\ttoastError('Bad type file');\n\t\t\ttarget.value = '';\n\t\t\tsetAvatarURL(user.avatarURL);\n\t\t\tsetAvatar(null);\n\t\t\ttarget.click();\n\t\t}\n\t};\n\n\treturn (\n\t\t<Container>\n\t\t\t<Form onSubmit={handleSubmit}>\n\t\t\t\t<FlexBoxMain>\n\t\t\t\t\t<FlexBoxSection>\n\t\t\t\t\t\t<FlexBox>\n\t\t\t\t\t\t\t<Label>\n\t\t\t\t\t\t\t\tOld name\n\t\t\t\t\t\t\t\t<Input type='text' name='oldname' value={user.name} disabled />\n\t\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t\t<Label>\n\t\t\t\t\t\t\t\tNew name\n\t\t\t\t\t\t\t\t<Input type='text' name='name' />\n\t\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t</FlexBox>\n\t\t\t\t\t\t<FlexBox>\n\t\t\t\t\t\t\t<Label>\n\t\t\t\t\t\t\t\tOld password\n\t\t\t\t\t\t\t\t<Input type='password' name='oldpassword' />\n\t\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t\t<Label>\n\t\t\t\t\t\t\t\tNew password\n\t\t\t\t\t\t\t\t<Input type='password' name='password' />\n\t\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t\t<Label>\n\t\t\t\t\t\t\t\tConfirm password\n\t\t\t\t\t\t\t\t<Input type='password' name='confirmpassword' />\n\t\t\t\t\t\t\t</Label>\n\t\t\t\t\t\t</FlexBox>\n\t\t\t\t\t</FlexBoxSection>\n\t\t\t\t\t<FlexBoxSection>\n\t\t\t\t\t\t<Img src={avatarURL || user.avatarURL} alt='user avatar' />\n\t\t\t\t\t\t<Input type='file' name='avatar' onChange={handleFileChange} />\n\t\t\t\t\t\t<ButtonBox>\n\t\t\t\t\t\t\t<Button type='submit'>Change</Button>\n\t\t\t\t\t\t\t<Button type='button' onClick={() => navigate('/phonebook')}>\n\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</ButtonBox>\n\t\t\t\t\t</FlexBoxSection>\n\t\t\t\t</FlexBoxMain>\n\t\t\t</Form>\n\t\t</Container>\n\t);\n};\n\nexport default ChangeAvatar;\n","/** @format */\n\nimport styled from 'styled-components';\nimport Link from '@mui/material/Link';\n\nexport const Container = styled.div`\n\tpadding: 0 30px;\n\tmargin-left: auto;\n\tmargin-right: auto;\n\n\t@media screen and (max-width: 767px) {\n\t\twidth: 400px;\n\t}\n\n\t@media screen and (min-width: 768px) and (max-width: 1279px) {\n\t\twidth: 768px;\n\t\tpadding: 0 60px;\n\t}\n\n\t@media screen and (min-width: 1280px) {\n\t\twidth: 1150px;\n\t\tpadding: 0 90px;\n\t}\n`;\n\nexport const Button = styled.button`\n\tborder-radius: ${p => p.theme.spacing(2)};\n\tfont-size: 16px;\n\tborder: 1px solid rgba(0, 0, 0, 0.7);\n\tcursor: pointer;\n\tbox-shadow: 0px 0px 4px 2px rgba(128, 128, 128, 0.5);\n\ttransition: background-color 250ms cubic-bezier(0.4, 0, 0.2, 1);\n\tmin-width: 30px;\n\theight: 34px;\n\n\t&:hover {\n\t\tbackground-color: antiquewhite;\n\t\ttransition: background-color 250ms cubic-bezier(0.4, 0, 0.2, 1);\n\t}\n\n\t@media screen and (min-width: 768px) {\n\t\tfont-size: 20px;\n\t\tmin-width: 80px;\n\t\theight: 40px;\n\t}\n\n\t@media screen and (min-width: 1280px) {\n\t\tfont-size: 22px;\n\t}\n`;\n\nexport const ButtonBox = styled.div`\n\tdisplay: flex;\n\tjustify-content: space-around;\n\tmargin-top: 35px;\n\tgap: 10px;\n`;\n\nexport const FormBox = styled.form`\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\tgap: 20px;\n\tpadding: 35px 15px;\n\tborder-radius: 12px;\n\tborder: 0.5px solid black;\n\tmax-width: 400px;\n\tmargin-left: auto;\n\tmargin-right: auto;\n`;\n\nexport const TextBox = styled.ul`\n\tdisplay: flex;\n\tflex-direction: column;\n\tjustify-content: center;\n\tgap: 25px;\n\tpadding: 35px 15px;\n\tborder-radius: 12px;\n\tborder: 0.5px solid black;\n\tmax-width: 400px;\n\tmargin-left: auto;\n\tmargin-right: auto;\n\tlist-style: none;\n`;\n\nexport const User = styled.span`\n\tfont-weight: 700;\n\tcolor: crimson;\n`;\n\nexport const Text = styled.li`\n\ttext-align: justify;\n`;\n\nexport const Redirect = styled.li`\n\tfont-size: 12px;\n`;\n\nexport const Form = styled.form`\n\tmargin-left: auto;\n\tmargin-right: auto;\n\tpadding: 10px;\n\tborder-radius: ${p => p.theme.spacing(2)};\n\tfont-size: 16px;\n\tborder: 1px solid rgba(0, 0, 0, 0.7);\n\tbox-shadow: 0px 0px 4px 2px rgba(128, 128, 128, 0.5);\n\tmin-height: 300px;\n\n\t@media screen and (min-width: 768px) {\n\t\tfont-size: 18px;\n\t\tpadding: 20px;\n\t}\n\n\t@media screen and (min-width: 1280px) {\n\t\tpadding: 50px;\n\t}\n`;\n\nexport const Label = styled.label`\n\tfont-size: 16px;\n\n\t@media screen and (min-width: 768px) {\n\t\tfont-size: 18px;\n\t}\n\n\t@media screen and (min-width: 1280px) {\n\t\tfont-size: 22px;\n\t}\n`;\n\nexport const Input = styled.input`\n\tdisplay: flex;\n\tjustify-content: space-between;\n\talign-items: center;\n\tpadding: 5px;\n\tborder-radius: ${p => p.theme.spacing(1)};\n\tfont-size: 16px;\n\tborder: 1px solid rgba(0, 0, 0, 0.7);\n\tcursor: pointer;\n\tmargin-top: 5px;\n\twidth: 100%;\n\n\t@media screen and (min-width: 768px) {\n\t\tfont-size: 18px;\n\t}\n\n\t@media screen and (min-width: 1280px) {\n\t\tfont-size: 22px;\n\t}\n`;\nexport const FlexBoxMain = styled.div`\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tflex-direction: column;\n\tgap: 30px;\n\n\t@media screen and (min-width: 768px) {\n\t\tflex-direction: row;\n\t}\n`;\n\nexport const FlexBoxSection = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: space-between;\n\tgap: 12px;\n`;\n\nexport const FlexBox = styled.div`\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: space-between;\n\tgap: 4px;\n\tborder: 1px solid darkslateblue;\n\tborder-radius: ${p => p.theme.spacing(3)};\n\tpadding: ${p => p.theme.spacing(3)};\n`;\n\nexport const Img = styled.img`\n\twidth: 180px;\n\theight: 180px;\n\tobject-fit: cover;\n\tborder-radius: 50%;\n\n\t@media screen and (min-width: 768px) {\n\t\twidth: 250px;\n\t\theight: 250px;\n\t\tmargin-top: 0;\n\t}\n`;\n\nexport const TextMessage = styled.h1`\n\ttext-align: center;\n\tmargin-top: 70px;\n`;\n\nexport const LinkHome = styled(Link)`\n\tdisplay: flex;\n\tjustify-content: center;\n`;\n\nexport const ImgBox = styled(Link)`\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tpadding-top: 60px;\n`;\n"],"names":["ChangeAvatar","avatar","setAvatar","useState","avatarURL","setAvatarURL","dispatch","useDispatch","navigate","useNavigate","user","useAuth","useEffect","avatarObjectURL","URL","createObjectURL","revokeObjectURL","_jsx","Container","children","Form","onSubmit","async","e","preventDefault","newName","target","name","value","oldPas","oldpassword","newPas","password","resultPas","newPassword","confPas","toastError","confirmpassword","changeName","changePassword","oldPassword","formData","FormData","append","changeAvatar","error","_jsxs","FlexBoxMain","FlexBoxSection","FlexBox","Label","Input","type","disabled","Img","src","alt","onChange","_ref","files","file","File","startsWith","click","ButtonBox","Button","onClick","styled","div","_templateObject","_taggedTemplateLiteral","button","_templateObject2","p","theme","spacing","_templateObject3","form","_templateObject4","ul","_templateObject5","span","_templateObject6","li","_templateObject7","_templateObject8","_templateObject9","label","_templateObject10","input","_templateObject11","_templateObject12","_templateObject13","_templateObject14","img","_templateObject15","TextMessage","h1","_templateObject16","LinkHome","Link","_templateObject17","ImgBox","_templateObject18"],"sourceRoot":""}